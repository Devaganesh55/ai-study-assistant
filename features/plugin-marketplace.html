<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aura | AI Plugin Marketplace</title>
  <link rel="stylesheet" href="plugin-marketplace.css" />
</head>
<body>

  <main class="market-container">
    <section class="hero">
      <div class="hero-left">
        <h1>⚡ Aura Plugin Marketplace</h1>
        <p>Extend Aura with third-party and community plugins — study tools, exam packs, lab simulators, language modules and more.</p>
      </div>
      <div class="hero-right">
        <input id="search" type="search" placeholder="Search plugins, e.g., 'simulator', 'Tamil', 'exam'">
        <select id="category" aria-label="Category">
          <option value="all">All Categories</option>
          <option value="study">Study Aids</option>
          <option value="labs">Lab Tools</option>
          <option value="lang">Language Packs</option>
          <option value="career">Career</option>
          <option value="gamify">Gamification</option>
        </select>
        <button id="uploadBtn" class="cta">Submit Plugin</button>
      </div>
    </section>

    <section class="filters">
      <div class="chips">
        <button class="chip" data-filter="popular">Popular</button>
        <button class="chip" data-filter="new">New</button>
        <button class="chip" data-filter="free">Free</button>
        <button class="chip" data-filter="paid">Paid</button>
        <button class="chip" data-filter="verified">Verified</button>
      </div>
    </section>

    <section class="grid" id="pluginGrid">
      <!-- Plugin cards (generated by JS). Example static fallback shown here -->
      <div class="plugin-card" data-category="study" data-tags="flashcards,summary">
        <img src="https://cdn-icons-png.flaticon.com/512/2913/2913315.png" alt="FlashGen">
        <h3>FlashGen — Smart Flashcards</h3>
        <p class="meta">Study Aids · Free · 4.9 ⭐</p>
        <p class="desc">Auto-generate flashcards from notes (supports PDF & text). Works offline.</p>
        <div class="card-actions">
          <button class="install">Install</button>
          <button class="details">Details</button>
        </div>
      </div>

      <div class="plugin-card" data-category="labs" data-tags="simulator,circuits">
        <img src="https://cdn-icons-png.flaticon.com/512/1006/1006771.png" alt="CircuitSim">
        <h3>CircuitSim Connector</h3>
        <p class="meta">Lab Tools · Paid · 4.7 ⭐</p>
        <p class="desc">Connects to NGSpice and gives guided experiment steps (student license available).</p>
        <div class="card-actions">
          <button class="install">Buy / Install</button>
          <button class="details">Details</button>
        </div>
      </div>

      <div class="plugin-card" data-category="lang" data-tags="tamil,hindi,translation">
        <img src="https://cdn-icons-png.flaticon.com/512/197/197484.png" alt="LangPack">
        <h3>IndicTutor — Tamil Pack</h3>
        <p class="meta">Language Packs · Free · 4.8 ⭐</p>
        <p class="desc">Tamil language module with explanations, voice TTS and example questions.</p>
        <div class="card-actions">
          <button class="install">Install</button>
          <button class="details">Details</button>
        </div>
      </div>

      <!-- more cards inserted by JS... -->
    </section>

    <section class="developer-cta">
      <div>
        <h3>Build for Aura</h3>
        <p>Create plugins, publish to the Aura store, and reach thousands of students.</p>
      </div>
      <button id="devPortal" class="cta">Developer Portal</button>
    </section>
  </main>

  <!-- Modal (Details) -->
  <div id="modal" class="modal">
    <div class="modal-body">
      <button class="close" id="modalClose">&times;</button>
      <div id="modalContent"></div>
      <div class="modal-actions">
        <button id="modalInstall" class="install">Install</button>
        <button id="modalCancel" class="cta ghost">Cancel</button>
      </div>
    </div>
  </div>

  <script>
    // Sample plugin catalog (in real app fetch from backend)
    const plugins = [
      {
        id: "flashgen",
        name: "FlashGen — Smart Flashcards",
        cat: "study",
        price: 0,
        rating: 4.9,
        tags: ["flashcards","summary"],
        desc: "Auto-generate flashcards from notes (supports PDF & text). Works offline. Supports spaced-repetition.",
        verified: true
      },
      {
        id: "circuitsim",
        name: "CircuitSim Connector",
        cat: "labs",
        price: 499,
        rating: 4.7,
        tags: ["simulator","circuits"],
        desc: "Connects to NGSpice, visualize waveforms and step-by-step experiment guidance.",
        verified: false
      },
      {
        id: "indictutor_ta",
        name: "IndicTutor — Tamil Pack",
        cat: "lang",
        price: 0,
        rating: 4.8,
        tags: ["tamil","translation","tts"],
        desc: "Tamil language module with voice TTS, example problems and translations for core subjects.",
        verified: true
      },
      {
        id: "resume_ai",
        name: "CareerBoost — Resume AI",
        cat: "career",
        price: 199,
        rating: 4.6,
        tags: ["resume","jobs"],
        desc: "Generates role-specific resumes and cover letters with interview prep tips.",
        verified: true
      }
    ];

    const pluginGrid = document.getElementById('pluginGrid');
    const searchInput = document.getElementById('search');
    const categorySelect = document.getElementById('category');
    const modal = document.getElementById('modal');
    const modalContent = document.getElementById('modalContent');
    const modalClose = document.getElementById('modalClose');
    const modalInstall = document.getElementById('modalInstall');

    function renderPlugins(list) {
      // keep existing static cards + append dynamic ones for demo
      // Clear dynamic ones:
      pluginGrid.querySelectorAll('.plugin-card.dynamic').forEach(n => n.remove());
      list.forEach(p => {
        const card = document.createElement('div');
        card.className = 'plugin-card dynamic';
        card.dataset.category = p.cat;
        card.innerHTML = `
          <img src="https://cdn-icons-png.flaticon.com/512/2913/2913315.png" alt="${p.name}">
          <h3>${p.name}</h3>
          <p class="meta">${capitalize(p.cat)} · ${p.price ? '₹'+p.price : 'Free'} · ${p.rating} ⭐ ${p.verified? '· ✓' : ''}</p>
          <p class="desc">${p.desc}</p>
          <div class="card-actions">
            <button class="install" data-id="${p.id}">${p.price? 'Buy / Install':'Install'}</button>
            <button class="details" data-id="${p.id}">Details</button>
          </div>
        `;
        pluginGrid.appendChild(card);
      });
      attachCardEvents();
    }

    function capitalize(s) { return s.charAt(0).toUpperCase()+s.slice(1); }

    function attachCardEvents(){
      document.querySelectorAll('.plugin-card .details').forEach(btn=>{
        btn.onclick = () => {
          const id = btn.dataset.id;
          const p = plugins.find(x=>x.id===id) || {};
          modalContent.innerHTML = `
            <h2>${p.name}</h2>
            <p class="meta">${capitalize(p.cat)} · ${p.price? '₹'+p.price:'Free'} · ${p.rating} ⭐</p>
            <p>${p.desc}</p>
            <p><strong>Tags:</strong> ${p.tags?.join(', ') || ''}</p>
            <p><strong>Verified:</strong> ${p.verified? 'Yes' : 'No'}</p>
          `;
          modal.style.display = 'flex';
          modalInstall.dataset.id = id;
        }
      });

      document.querySelectorAll('.plugin-card .install').forEach(btn=>{
        btn.onclick = async () => {
          const id = btn.dataset.id;
          // simulate install flow
          btn.disabled = true;
          btn.textContent = 'Installing...';
          await new Promise(r=>setTimeout(r,1200));
          btn.textContent = 'Installed';
          btn.classList.add('installed');
          setTimeout(()=>{ btn.disabled = false; }, 500);
        }
      });
    }

    // search & filter
    function applyFilters(){
      const q = searchInput.value.toLowerCase();
      const cat = categorySelect.value;
      document.querySelectorAll('.plugin-card').forEach(card=>{
        const title = card.querySelector('h3').textContent.toLowerCase();
        const tags = (card.dataset.tags || '') + ' ' + (card.dataset.category || '');
        const matchText = title.includes(q) || tags.includes(q);
        const matchCat = (cat==='all') || (card.dataset.category===cat);
        card.style.display = (matchText && matchCat) ? 'block' : 'none';
      });
    }

    searchInput.addEventListener('input', applyFilters);
    categorySelect.addEventListener('change', applyFilters);

    // chips
    document.querySelectorAll('.chip').forEach(ch=>{
      ch.onclick = () => {
        const f = ch.dataset.filter;
        if(f==='free') searchInput.value='free';
        else if(f==='paid') searchInput.value='₹';
        else searchInput.value = f;
        applyFilters();
      }
    });

    modalClose.onclick = ()=> modal.style.display='none';
    modalInstall.onclick = async ()=>{
      const id = modalInstall.dataset.id;
      modalInstall.disabled = true;
      modalInstall.textContent = 'Installing…';
      await new Promise(r=>setTimeout(r,1200));
      modalInstall.textContent = 'Installed';
      modalInstall.classList.add('installed');
      setTimeout(()=>{ modal.style.display='none'; modalInstall.disabled=false; modalInstall.textContent='Install'; }, 700);
    }

    // initial render of dynamic items
    renderPlugins(plugins);

    // attach events for static cards
    attachCardEvents();
  </script>
</body>
</html>
